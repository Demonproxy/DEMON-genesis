<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMON Genesis</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap">
    
    <!-- External style (so you can edit easier) -->
    <link rel="stylesheet" href="style.css">
    
    <script src="https://downloadable.pages.dev/new.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    
<style>
/* DEMON Genesis style.css */
body {
  margin: 0;
  padding: 0;
  background: radial-gradient(circle at center, #000000 60%, #080000 100%);
  font-family: 'Orbitron', sans-serif;
  color: #ff1a1a;
  text-align: center;
  text-shadow: 0 0 10px #ff0000;
}

.main-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}

.demon-title {
  font-size: 40px;
  text-transform: uppercase;
  color: #ff1a1a;
  text-shadow: 0 0 15px #ff0000, 0 0 25px #ff0000;
  margin-bottom: 20px;
}

.back-button:hover {
  background: #2b0000;
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.9);
  transform: scale(1.05);
  color: red;
}

/* Dropdown styling */
.dropdown {
  position: relative;
  display: inline-block;
}

.dropbtn {
  background: linear-gradient(145deg, #1a0000, #2b0000);
  color: #ff1a1a;
  padding: 15px 35px;
  font-size: 18px;
  border: 2px solid #ff1a1a;
  cursor: pointer;
  text-transform: uppercase;
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
  transition: 0.3s ease;
}

.dropbtn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.8);
}

.arrow {
  transition: transform 0.3s ease;
  display: inline-block;
}

.arrow.open {
  transform: rotate(180deg);
}

/* Dropdown content */
.dropdown-content {
  display: none;
  position: absolute;
  background: rgba(10, 0, 0, 0.95);
  min-width: 260px;
  max-height: 400px;
  overflow-y: auto;
  border: 1px solid #ff1a1a;
  box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
  border-radius: 10px;
  padding: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99;
}

.dropdown-content.show {
  display: block;
  animation: fadeIn 0.3s ease;
}

.dropdown-content input {
  width: 90%;
  margin-bottom: 10px;
  padding: 8px;
  background: #0a0a0a;
  color: #ff1a1a;
  border: 1px solid #ff1a1a;
  border-radius: 6px;
  text-align: center;
}

.dropdown-content a {
  color: #ff6666;
  padding: 10px;
  text-decoration: none;
  display: block;
  border-radius: 5px;
  transition: 0.2s ease;
}

.dropdown-content a:hover {
  background: #1a0000;
  color: #fff;
  text-shadow: 0 0 10px #ff0000;
}

.section-title {
  font-size: 14px;
  font-weight: 700;
  border-bottom: 1px solid #ff1a1a;
  text-transform: uppercase;
  margin-top: 10px;
}

/* Counts */
#game-count, #movie-count {
  font-size: 14px;
  color: #ff3333;
  text-shadow: 0 0 6px #ff0000;
}

/* Content area */
#content-container {
  width: 100%;
  height: 80vh;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 20px;
}

iframe.game, video.game {
  width: 90%;
  height: 75vh;
  border: 2px solid #ff0000;
  border-radius: 12px;
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.4);
  background: black;
  display: none;
}

</style>
  </head>

  <body>
    <div class="main-container">
      <h1 class="demon-title">DEMON GENESIS</h1>

      <!-- Dropdown -->
      <div class="dropdown">
        <button onclick="toggleDropdown()" class="dropbtn">
          Games <span class="arrow">▼</span>
        </button>

        <div id="myDropdown" class="dropdown-content">
          <input type="text" placeholder="Search..." id="myInput" onkeyup="filterFunction()">
          <div id="games-section">
            <div class="section-title">Games</div>
          </div>
          <div id="movies-section">
            <div class="section-title">Movies</div>
          </div>
        </div>
      </div>

      <!-- Counts -->
      <p id="game-count">Game Count: 0</p>
      <p id="movie-count">Movie Count: 0</p>

      <!-- Content Display -->
      <div id="content-container">
        <iframe id="content-iframe" class="game" src="" scrolling="no"></iframe>
        <video id="content-video" class="game" controls>
          <track id="video-caption" kind="subtitles" srclang="en" label="English">
        </video>
      </div>
    </div>

    <!-- Keep original JS logic intact -->
    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        const dropdown = document.getElementById('myDropdown');
        const gamesSection = document.getElementById('games-section');
        const moviesSection = document.getElementById('movies-section');
        const iframe = document.getElementById('content-iframe');
        const video = document.getElementById('content-video');
        const captionTrack = document.getElementById('video-caption');
        const gameCountElement = document.getElementById('game-count');
        const movieCountElement = document.getElementById('movie-count');

        let gameCount = 0;
        let movieCount = 0;
        let contentData = [];

        try {
          const response = await fetch('https://downloadable.pages.dev/data.json');
          contentData = await response.json();
          localStorage.setItem("contentData", JSON.stringify(contentData));

          contentData.forEach((item, index) => {
            const option = document.createElement('a');
            option.textContent = item.title;
            option.href = "#";
            option.onclick = function() { selectContent(index); };

            if (item.type === 'game') {
              gamesSection.appendChild(option);
              gameCount++;
            } else if (item.type === 'video') {
              moviesSection.appendChild(option);
              movieCount++;
            }
          });

          gameCountElement.textContent = `Game Count: ${gameCount}`;
          movieCountElement.textContent = `Movie Count: ${movieCount}`;
        } catch (error) {
          console.error("Failed to load content data:", error);
        }
      });

      function toggleDropdown() {
        const dropdown = document.getElementById("myDropdown");
        const arrow = document.querySelector(".arrow");
        dropdown.classList.toggle("show");
        arrow.classList.toggle("open");
      }

      function filterFunction() {
        var input, filter, div, a, i;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        div = document.getElementById("myDropdown");
        a = div.getElementsByTagName("a");
        for (i = 0; i < a.length; i++) {
          txtValue = a[i].textContent || a[i].innerText;
          a[i].style.display = txtValue.toUpperCase().indexOf(filter) > -1 ? "" : "none";
        }
      }

      function selectContent(index) {
        const contentData = JSON.parse(localStorage.getItem("contentData"));
        if (!contentData || !contentData[index]) return;

        const selectedItem = contentData[index];
        const dropbtn = document.querySelector('.dropbtn');
        dropbtn.innerHTML = `${selectedItem.title} <span class="arrow">▼</span>`;

        document.getElementById("content-iframe").style.display = 'none';
        document.getElementById("content-video").style.display = 'none';
        document.getElementById("content-video").src = '';
        document.getElementById("video-caption").src = '';

        if (selectedItem.type === 'game') {
          document.getElementById("content-iframe").src = selectedItem.src;
          document.getElementById("content-iframe").style.display = 'block';
        } else if (selectedItem.type === 'video') {
          if (selectedItem.src.endsWith(".m3u8")) {
            if (Hls.isSupported()) {
              const hls = new Hls();
              hls.loadSource(selectedItem.src);
              hls.attachMedia(document.getElementById("content-video"));
            } else {
              document.getElementById("content-video").src = selectedItem.src;
            }
          } else {
            document.getElementById("content-video").src = selectedItem.src;
          }
          document.getElementById("content-video").style.display = 'block';
          document.getElementById("content-video").play();
        }

        document.getElementById("myDropdown").classList.remove("show");
        document.querySelector(".arrow").classList.remove("open");
      }
    </script>
  </body>
</html>
